# Configuration Files

Base44 uses configuration files in the `base44/` directory to manage your project.

## config.jsonc

The main configuration file for your Base44 project.

Location: `base44/config.jsonc`

### Full Structure

```jsonc
{
  // Project metadata
  "name": "my-app",
  "description": "My awesome application",
  "version": "1.0.0",

  // Site/frontend configuration
  "site": {
    "buildDir": "dist",
    "buildCommand": "npm run build",
    "publicPath": "/",
    "spa": true,
    "env": {
      "VITE_APP_NAME": "My App"
    }
  },

  // Function configuration
  "functions": {
    "runtime": "nodejs18",
    "timeout": 30,
    "memory": 256,
    "env": {
      "NODE_ENV": "production"
    }
  },

  // Entity configuration
  "entities": {
    "timestamps": true,
    "softDelete": false
  },

  // Agent configuration
  "agents": {
    "defaultModel": "gpt-4",
    "maxTokens": 2000
  },

  // Environment-specific overrides
  "environments": {
    "development": {
      "site": {
        "env": {
          "VITE_API_URL": "http://localhost:3000"
        }
      }
    },
    "staging": {
      "site": {
        "env": {
          "VITE_API_URL": "https://staging-api.example.com"
        }
      }
    },
    "production": {
      "site": {
        "env": {
          "VITE_API_URL": "https://api.example.com"
        }
      }
    }
  }
}
```

### Configuration Sections

#### Project Metadata

```jsonc
{
  "name": "my-app",           // Project identifier
  "description": "...",        // Project description
  "version": "1.0.0"          // Semantic version
}
```

#### Site Configuration

```jsonc
{
  "site": {
    // Directory containing built files
    "buildDir": "dist",

    // Command to build the site
    "buildCommand": "npm run build",

    // Base URL path
    "publicPath": "/",

    // Single Page Application mode
    "spa": true,

    // Build-time environment variables
    "env": {
      "VITE_APP_NAME": "My App"
    },

    // Headers for all responses
    "headers": {
      "X-Frame-Options": "DENY"
    },

    // Redirect rules
    "redirects": [
      {
        "source": "/old-path",
        "destination": "/new-path",
        "permanent": true
      }
    ]
  }
}
```

#### Function Configuration

```jsonc
{
  "functions": {
    // Node.js runtime version
    "runtime": "nodejs18",

    // Execution timeout in seconds
    "timeout": 30,

    // Memory allocation in MB
    "memory": 256,

    // Environment variables
    "env": {
      "NODE_ENV": "production"
    },

    // Per-function overrides
    "overrides": {
      "heavyProcess": {
        "timeout": 120,
        "memory": 512
      }
    }
  }
}
```

#### Entity Configuration

```jsonc
{
  "entities": {
    // Auto-add createdAt/updatedAt
    "timestamps": true,

    // Enable soft delete (deletedAt instead of removal)
    "softDelete": false,

    // Default pagination limit
    "defaultLimit": 20,

    // Maximum pagination limit
    "maxLimit": 100
  }
}
```

#### Agent Configuration

```jsonc
{
  "agents": {
    // Default AI model
    "defaultModel": "gpt-4",

    // Default max tokens
    "maxTokens": 2000,

    // Default temperature
    "temperature": 0.7,

    // Rate limiting
    "rateLimit": {
      "requests": 100,
      "window": "1m"
    }
  }
}
```

## .app.jsonc

Contains the Base44 app ID. This file links your local project to your Base44 app.

Location: `base44/.app.jsonc`

```jsonc
{
  "appId": "app_abc123xyz"
}
```

**Important**: This file should NOT be committed to version control. Add to `.gitignore`:

```gitignore
base44/.app.jsonc
```

This file is auto-generated by:
- `base44 create` - when creating a new project
- `base44 link` - when linking an existing project

## .gitignore Recommendations

Add these Base44-related entries to your `.gitignore`:

```gitignore
# Base44
base44/.app.jsonc

# Environment files (may contain secrets)
.env
.env.local
.env.*.local

# Build output
dist/
build/
out/
```

## Environment Variables

### In config.jsonc

For non-sensitive, build-time values:

```jsonc
{
  "site": {
    "env": {
      "VITE_APP_NAME": "My App",
      "VITE_PUBLIC_KEY": "pk_123"
    }
  }
}
```

### In .env Files

For local development:

```bash
# .env.local (gitignored)
VITE_BASE44_APP_ID=app_abc123
VITE_API_URL=http://localhost:3000
```

### In Dashboard

For sensitive production values, set environment variables in the Base44 dashboard under **Settings > Environment**.

## Configuration Precedence

Values are resolved in this order (highest to lowest priority):

1. Command-line flags
2. Environment variables
3. Environment-specific config (`environments.production`)
4. Base config (`config.jsonc` root)
5. Default values

## Validation

Validate your configuration:

```bash
# Check config syntax
base44 config validate

# Show resolved config
base44 config show

# Show config for specific environment
base44 config show --env production
```

## Examples

### Minimal Config

```jsonc
// base44/config.jsonc
{
  "name": "my-app",
  "site": {
    "buildDir": "dist",
    "buildCommand": "npm run build"
  }
}
```

### Full-Featured Config

```jsonc
// base44/config.jsonc
{
  "name": "e-commerce-app",
  "description": "Online store with product catalog",
  "version": "2.1.0",

  "site": {
    "buildDir": "dist",
    "buildCommand": "npm run build",
    "publicPath": "/",
    "spa": true,
    "headers": {
      "X-Content-Type-Options": "nosniff",
      "X-Frame-Options": "DENY"
    }
  },

  "functions": {
    "runtime": "nodejs18",
    "timeout": 30,
    "memory": 256,
    "overrides": {
      "processOrder": {
        "timeout": 60,
        "memory": 512
      },
      "generateReport": {
        "timeout": 120,
        "memory": 1024
      }
    }
  },

  "entities": {
    "timestamps": true,
    "softDelete": true
  },

  "agents": {
    "defaultModel": "gpt-4",
    "maxTokens": 2000
  },

  "environments": {
    "development": {
      "functions": {
        "env": {
          "DEBUG": "true"
        }
      }
    },
    "production": {
      "functions": {
        "env": {
          "DEBUG": "false"
        }
      }
    }
  }
}
```
